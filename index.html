<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>動態成員卡片管理 (Firebase)</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
</head>
<body>
    
    <div id="authStatus" style="margin-bottom: 20px; border-bottom: 1px solid #ddd; padding-bottom: 15px;">
        <span id="authMessage" style="margin-right: 15px; font-size: 0.9em; color: #555;">狀態：載入中...</span>
        
        <button id="editButton" style="display:block; margin-top: 10px;" onclick="toggleEditMode()">
            編輯 / 登入管理員
        </button>
        <button id="logoutButton" style="display:none;" onclick="logout()">
            登出
        </button>
        
        <div id="loginForm" style="display:none; border: 1px solid #ccc; padding: 15px; margin-top: 10px; max-width: 300px; background: #fff;">
            <h4>管理員登入</h4>
            <input type="email" id="loginEmail" placeholder="Email" style="margin-bottom: 5px; padding: 5px; display: block; width: 90%;">
            <input type="password" id="loginPassword" placeholder="密碼" style="margin-bottom: 10px; padding: 5px; display: block; width: 90%;">
            <button onclick="login()" style="padding: 5px 10px; background-color: #1a237e; color: white; border: none; border-radius: 4px;">登入</button>
            <p id="loginError" style="color:red; font-size: 0.9em; margin-top: 10px;"></p>
        </div>
    </div>
    
    <div class="add-member-form" id="addMemberForm" style="display:none;">
        <h3>新增成員</h3>
        <input type="text" id="memberName" placeholder="輸入成員名稱 (必填)">
        <input type="file" id="memberImageFile" accept="image/*">
        <button onclick="addMember()">新增卡片</button>
    </div>

    <div id="managementArea" style="display:none; padding: 20px; border: 1px dashed #0056b3; margin-bottom: 20px;">
        <h2>卡片顯示控制</h2>
        <p>勾選以決定是否公開呈現 (需點擊下方儲存按鈕生效)：</p>
        <ul id="controlList" class="control-list">
            </ul>
        <button onclick="saveControlState()" style="padding: 8px 15px; background-color: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer; margin-top: 15px;">
            儲存控制狀態
        </button>
    </div>

    <hr>
    <h1>成員列表：</h1>
    <p style="font-size: 0.9em; color: #777;">您當前看到的是所有用戶同步的資料。</p>

    <div id="membersContainer" class="members-grid">
    </div>

    <script src="script.js"></script>
</body>
</html>
